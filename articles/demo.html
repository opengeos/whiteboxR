<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>whitebox Demo • whitebox</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="whitebox Demo">
<meta property="og:description" content="whitebox">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">whitebox</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/datasets.html">whitebox Tool Metadata</a>
    </li>
    <li>
      <a href="../articles/demo.html">whitebox Demo</a>
    </li>
    <li>
      <a href="../articles/wbt-method.html">`wbt()` method: call 'Whitebox' tools by name</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/giswqs/whiteboxR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>whitebox Demo</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/giswqs/whiteboxR/blob/HEAD/vignettes/demo.Rmd" class="external-link"><code>vignettes/demo.Rmd</code></a></small>
      <div class="hidden name"><code>demo.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>whitebox is an R frontend for the ‘WhiteboxTools’ library, which is
an advanced geospatial data analysis platform developed by Prof. John
Lindsay at the University of Guelph’s Geomorphometry and Hydrogeomatics
Research Group.</p>
<p>‘WhiteboxTools’ can be used to perform common geographical
information systems (GIS) analysis operations, such as cost-distance
analysis, distance buffering, and raster reclassification. Remote
sensing and image processing tasks include image enhancement
(e.g. panchromatic sharpening, contrast adjustments), image mosaicing,
numerous filtering operations, simple classification (k-means), and
common image transformations. ‘WhiteboxTools’ also contains advanced
tooling for spatial hydrological analysis (e.g. flow-accumulation,
watershed delineation, stream network analysis, sink removal), terrain
analysis (e.g. common terrain indices such as slope, curvatures, wetness
index, hillshading; hypsometric analysis; multi-scale topographic
position analysis), and LiDAR data processing.</p>
<p>WhiteboxTools is not a cartographic or spatial data visualization
package; instead it is meant to serve as an analytical backend for other
data visualization software, mainly GIS.</p>
<p>This vignette shows how to use the <code>whitebox</code> R package to
run WhiteboxTools.</p>
<p>Suggested citation: Lindsay, J. B. (2016). Whitebox GAT: A case study
in geomorphometric analysis. Computers &amp; Geosciences, 95, 75-84.
doi: <a href="http://dx.doi.org/10.1016/j.cageo.2016.07.003" class="external-link uri">http://dx.doi.org/10.1016/j.cageo.2016.07.003</a></p>
</div>
<div class="section level2">
<h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<p>Load the <code>whitebox</code> library.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/giswqs/whiteboxR" class="external-link">whitebox</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="how-whitebox-works">How <code>whitebox</code> works<a class="anchor" aria-label="anchor" href="#how-whitebox-works"></a>
</h3>
<p>whitebox generates <code><a href="https://rdrr.io/r/base/system.html" class="external-link">system()</a></code> calls to a local
WhiteboxTools binary: <code>whitebox_tools</code> or
<code>whitebox_tools.exe</code></p>
<p>You can find the binary path that the package is going to use with
<code><a href="../reference/wbt_init.html">wbt_exe_path()</a></code></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wbt_init.html">wbt_exe_path</a></span><span class="op">(</span>shell_quote <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>This command always returns a “default” path, whether or not you have
WhiteboxTools installed.</p>
</div>
<div class="section level3">
<h3 id="interfacing-with-r-spatial-packages">Interfacing with R spatial packages<a class="anchor" aria-label="anchor" href="#interfacing-with-r-spatial-packages"></a>
</h3>
<p>WhiteboxTools input and output are specified as file paths to rasters
in GeoTIFF format, shapefiles, HTML output, LiDAR-related files, and
more.</p>
<p>In this vignette we will use the <code>terra</code> package for
visualization. Just as easily we could have used <code>raster</code>,
<code>stars</code> or other options available in the R ecosystem for
handling the GeoTIFF output.</p>
<p>The main way to view your output is to save “output” file paths as a
variable so that you can use them after processing to load the result
into an R spatial object.</p>
<div class="section level4">
<h4 id="working-with-raster-data">Working with Raster Data<a class="anchor" aria-label="anchor" href="#working-with-raster-data"></a>
</h4>
<p>A demonstration employing the {terra} package follows:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/giswqs/whiteboxR" class="external-link">whitebox</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># DEMO: calculate slope with WhiteboxTools and raster</span></span>
<span></span>
<span><span class="co"># Typically the input/output paths are stored as variables</span></span>
<span></span>
<span><span class="co"># sample DEM input GeoTIFF</span></span>
<span><span class="va">input</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sample_dem_data.html">sample_dem_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># output file (to be created)</span></span>
<span><span class="va">output</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"slope.tif"</span><span class="op">)</span></span></code></pre></div>
<p>Run a tool such as <code><a href="../reference/wbt_slope.html">wbt_slope()</a></code> or
<code>"Slope"</code>.</p>
<p>WhiteboxTools reads from <code>input</code> and writes to
<code>output</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wbt_slope.html">wbt_slope</a></span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, units <span class="op">=</span> <span class="st">'radians'</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">output</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># create a SpatRaster from file output path</span></span>
<span>  <span class="va">outputras</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">output</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>In this case, we can achieve a similar slope map result using
<code><a href="https://rdrr.io/pkg/terra/man/terrain.html" class="external-link">terra::terrain()</a></code>, so we will create and plot a SpatRaster
from <code>output</code> and compare the two.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">input</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">output</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">outputras</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># par(mfrow = c(2, 1), mar = c(1, 1, 1, 1))</span></span>
<span>  </span>
<span>  <span class="co"># inspect the output graphically</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>    <span class="va">outputras</span>,</span>
<span>    main <span class="op">=</span> <span class="st">"whitebox::wbt_slope() [radians]"</span>,</span>
<span>    axes <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># calculate equivalent using raster::terrain() on input</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>    <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/terrain.html" class="external-link">terrain</a></span><span class="op">(</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">input</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    main <span class="op">=</span> <span class="st">"terra::terrain() [radians]"</span>,</span>
<span>    axes <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>The <code>SpatRaster</code>, <code>RasterLayer</code> and related
classes in the terra and raster packages are perfect for maintaining the
linkage between file output and an R object with the data in or out of
memory.</p>
<p>Use <code><a href="https://rdrr.io/pkg/terra/man/sources.html" class="external-link">terra::sources()</a></code> to get the “source” file name(s).
If you are using a raster <code>RasterLayer</code> objects the
equivalent method is <code><a href="https://rdrr.io/pkg/raster/man/filename.html" class="external-link">raster::filename()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the SpatRaster retains a reference to the input file name</span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/sources.html" class="external-link">sources</a></span><span class="op">(</span><span class="va">outputras</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="whiteboxtools-r-setup">WhiteboxTools R setup<a class="anchor" aria-label="anchor" href="#whiteboxtools-r-setup"></a>
</h3>
</div>
<div class="section level3">
<h3 id="installing-whiteboxtools">Installing WhiteboxTools<a class="anchor" aria-label="anchor" href="#installing-whiteboxtools"></a>
</h3>
<p>In <code>whitebox</code> <code><a href="../reference/wbt_init.html">wbt_init()</a></code> is the standard way
to set the “exe_path” for a session.</p>
<p>If you do not have WhiteboxTools installed in the default location,
do not have <code>whitebox_tools</code> on your PATH, and have not set
up your package options, the package will not be able to find your
WhiteboxTools installation on load.</p>
<p>Usually you can use <code><a href="../reference/install_whitebox.html">whitebox::install_whitebox()</a></code> to
download the latest binaries that correspond to the available version of
the R package. However, this is not required. You may download/compile
WhiteboxTools yourself and install anywhere for use with the
<code>whitebox</code> R package.</p>
<p>For general information consult the WhiteboxTools User Manual: <a href="https://www.whiteboxgeo.com/manual/wbt_book/install.html" class="external-link uri">https://www.whiteboxgeo.com/manual/wbt_book/install.html</a></p>
<p>For more details on building from source see: <a href="https://github.com/jblindsay/whitebox-tools" class="external-link uri">https://github.com/jblindsay/whitebox-tools</a></p>
</div>
<div class="section level3">
<h3 id="package-settings-with-wbt_init">Package Settings with <code>wbt_init()</code><a class="anchor" aria-label="anchor" href="#package-settings-with-wbt_init"></a>
</h3>
<p><code><a href="../reference/wbt_init.html">wbt_init()</a></code> is used to set and check the path of the
binary executable that commands are passed to.</p>
<p>The executable path and other options are stored as package options,
and can be overridden by system environment variables. A default value
<code>wbt_exe_path(shell_quote = FALSE)</code> is passed when the
<code>exe_path</code> argument is unspecified.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># inspect where wbt_init() will be checking</span></span>
<span><span class="fu"><a href="../reference/wbt_init.html">wbt_exe_path</a></span><span class="op">(</span>shell_quote <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># TRUE when file is found at one of the user specified paths or package default</span></span>
<span><span class="co"># FALSE when whitebox_tools does not exist at path</span></span>
<span><span class="fu"><a href="../reference/wbt_init.html">wbt_init</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This section will cover optional arguments to <code><a href="../reference/wbt_init.html">wbt_init()</a></code>
(<code>exe_path</code>, <code>wd</code> and <code>verbose</code>) and
their corresponding options and helper functions.</p>
<div class="section level4">
<h4 id="exe_path-argument">
<code>exe_path</code> argument<a class="anchor" aria-label="anchor" href="#exe_path-argument"></a>
</h4>
<p>The <code>exe_path</code> argument to <code><a href="../reference/wbt_init.html">wbt_init()</a></code> sets
the <code>whitebox.exe_path</code> package option. <code>exe_path</code>
is the path to a WhiteboxTools executable file. The default value is the
package installation directory, subdirectory <code>"WBT"</code>,
followed by <code>whitebox_tools.exe</code> or
<code>whitebox_tools</code> depending on your operating system.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set path manually to whitebox_tools executable, for instance:</span></span>
<span><span class="fu"><a href="../reference/wbt_init.html">wbt_init</a></span><span class="op">(</span>exe_path <span class="op">=</span> <span class="st">'/home/andrew/workspace/whitebox-tools/target/release/whitebox_tools'</span><span class="op">)</span></span></code></pre></div>
<p>The package will automatically find an existing installation when
<code>whitebox_tools</code> is in a directory on your PATH.</p>
<p>Package options other than <code>exe_path</code> (as detailed in
<code><a href="../reference/whitebox-package.html">?whitebox::whitebox</a></code> and <code><a href="../reference/wbt_init.html">?wbt_init</a></code>) can be set
with <code>wbt_init(exe_path, ...)</code>, where <code>...</code> is
additional named arguments corresponding to the <code>*</code> suffix in
<code>whitebox.*</code> package options names. Use
<code><a href="../reference/wbt_init.html">wbt_options()</a></code> or specific methods like
<code><a href="../reference/wbt_init.html">wbt_verbose()</a></code>, <code><a href="../reference/wbt_init.html">wbt_wd()</a></code> to get all values or
set specific values.</p>
</div>
<div class="section level4">
<h4 id="wd-argument">
<code>wd</code> argument<a class="anchor" aria-label="anchor" href="#wd-argument"></a>
</h4>
<p>The <code>wd</code> argument can be used to set the WhiteboxTools
working directory.</p>
<p>A working directory specifies a base folder path where WhiteboxTools
can find inputs and create outputs. Setting the <code>whitebox.wd</code>
package option (via the <code>wd</code> argument to
<code><a href="../reference/wbt_init.html">wbt_init()</a></code> or <code><a href="../reference/wbt_init.html">wbt_wd()</a></code>) aids the process of
setting file paths. If a value is set for the option the
<code>--wd</code> directory flag is added for tools that support it.</p>
<p>Before you set the working directory in a session the default output
will be in your current R working directory unless directory is
specified in your input/output arguments. You can change working
directory at any time by setting the <code>wd</code> argument to
<code><a href="../reference/wbt_init.html">wbt_wd()</a></code> and running a tool.</p>
<p>NOTE: once you have set a working directory in a session, the
directory needs to be set somewhere new to “replace” the old value; just
dropping the flag will <strong>not</strong> automatically change the
working directory <em>back to your R working directory</em>* and your
output will show up in whatever folder you set initially.</p>
<p>A helper method for setting the <code>whitebox.wd</code> option is
<code><a href="../reference/wbt_init.html">wbt_wd()</a></code>.</p>
<p>To “unset” the option in the R package you can use
<code>wbt_wd("")</code> which is equivalent to
<code>wbt_wd(getwd())</code>. The next tool call will change the
WhiteboxTools working directory setting to the new path. After this
point the flag need not be specified [until you wish to change
again].</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wbt_init.html">wbt_wd</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span> <span class="co"># "" equivalent to getwd()</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="verbose-argument">
<code>verbose</code> argument<a class="anchor" aria-label="anchor" href="#verbose-argument"></a>
</h4>
<p>The <code>verbose</code> argument is used to set the package option
related to tool “verbosity”: <code>whitebox.verbose</code>. When
<code>whitebox.verbose</code> is <code>FALSE</code> no output will be
<code><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat()</a></code> to the console by running tools.</p>
<p>A helper method for getting and setting the
<code>whitebox.verbose</code> option is <code><a href="../reference/wbt_init.html">wbt_verbose()</a></code>.
<code><a href="../reference/wbt_init.html">wbt_verbose()</a></code> is used throughout the package to check what
level of verbosity should be used.</p>
<p>By default, the result of <code><a href="../reference/wbt_init.html">wbt_verbose()</a></code> is the result of
<code><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive()</a></code> so tools will print extra console output when
you are there to see it. This is used in a variety of <code>wbt_*</code>
methods to allow the package option to control output for many functions
in a consistent manner, hide output in your automated tests, markdown
documents, vignettes etc.</p>
<p>In this vignette we use <code>wbt_verbose(TRUE)</code> so the package
option <code>whitebox.verbose</code> is set to <code>TRUE</code></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># force output when run non-interactively (knitr)</span></span>
<span><span class="fu"><a href="../reference/wbt_init.html">wbt_verbose</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>This is mainly to print out the tool name and elapsed time whenever
we run a tool:</p>
<pre><code><span><span class="co">#&gt; wbt_breach_depressions - Elapsed Time (excluding I/O): 0.12s</span></span></code></pre>
<p>This package-level verbose option can also control the
<code>verbose_mode</code> values passed to <code>wbt_*</code> tool
functions. Turning on “full” output requires a third option to be set
for this argument: <code>"all"</code>. Use
<code>wbt_verbose("all")</code>. <code><a href="../reference/wbt_init.html">wbt_verbose()</a></code> will still
return <code>TRUE</code> when the <code>whitebox.verbose</code> option
is <code>"all"</code>.</p>
</div>
</div>
<div class="section level3">
<h3 id="long-term-package-option-settings">Long-term Package Option Settings<a class="anchor" aria-label="anchor" href="#long-term-package-option-settings"></a>
</h3>
<p>The package will detect when you have added the WhiteboxTools
directory to your <code>PATH</code> environment variable. For long-term
package option settings you can put <code>whitebox_tools</code> on
<code>$PATH</code> or set <code>R_WHITEBOX_EXE_PATH</code> in your user
<code>.Rprofile</code> or <code>.Renviron</code>.</p>
<p>On Windows you can add the path to <code>whitebox_tools.exe</code> as
a new entry <code>R_WHITEBOX_EXE_PATH</code> in User or System
Environment variable.</p>
<p>On Linux/Mac you can set <code>R_WHITEBOX_EXE_PATH</code> directly
with
<code>export R_WHITEBOX_EXE_PATH="/path/to/whitebox_tools"</code>.</p>
<ul>
<li>Note that if you set your <code>$PATH</code> in you regular shell
profile (<code>.profile</code>/<code>.bashrc</code>/<code>.zshrc</code>)
then it will <em>not</em> be sourced by <em>RStudio</em> for your R
session by default.</li>
</ul>
<p>This requires that you have the Unix tool <code>which</code> or one
of its analogues.</p>
<p>You can also set <code>R_WHITEBOX_EXE_PATH</code> manually in R:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>R_WHITEBOX_EXE_PATH <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.which.html" class="external-link">Sys.which</a></span><span class="op">(</span><span class="st">"whitebox_tools"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>Replace the <code><a href="https://rdrr.io/r/base/Sys.which.html" class="external-link">Sys.which()</a></code> call with a custom path string
as needed such as <code>"C:/path/to/whitebox_tools.exe"</code>.</li>
</ul>
<p>All of the other package options can similarly be set as environment
variables. They are prefixed with <code>R_WHITEBOX_*</code>. See
<code><a href="../reference/whitebox-package.html">?whitebox</a></code> for details.</p>
</div>
</div>
<div class="section level2">
<h2 id="running-tools">Running tools<a class="anchor" aria-label="anchor" href="#running-tools"></a>
</h2>
<p>Specify input and output paths, and any other options, as specified
in package reference:</p>
<ul>
<li><a href="https://giswqs.github.io/whiteboxR/reference/index.html" class="external-link uri">https://giswqs.github.io/whiteboxR/reference/index.html</a></li>
</ul>
<p>For instance, “BreachDepressions” is used below to process a Digital
Elevation Model (DEM) before we identify flow pathways. This tool uses
uses Lindsay’s (2016) algorithm, which is preferred over depression
filling in most cases.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># sample DEM file path in package extdata folder</span></span>
<span><span class="va">input</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sample_dem_data.html">sample_dem_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># output file name</span></span>
<span><span class="va">output</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"output.tif"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># run breach_depressions tool</span></span>
<span><span class="fu"><a href="../reference/wbt_breach_depressions.html">wbt_breach_depressions</a></span><span class="op">(</span>dem <span class="op">=</span> <span class="va">input</span>, output <span class="op">=</span> <span class="va">output</span><span class="op">)</span></span></code></pre></div>
<p>For more info see: <code><a href="../reference/wbt_breach_depressions.html">?wbt_breach_depressions</a></code></p>
<p>These <code>wbt_*_tool_name_*()</code> functions are wrappers around
the <code><a href="../reference/wbt_run_tool.html">wbt_run_tool()</a></code> function that does the
<code><a href="https://rdrr.io/r/base/system.html" class="external-link">system()</a></code> call given a function-specific argument
string.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># sample DEM file path in package extdata folder</span></span>
<span><span class="va">input</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sample_dem_data.html">sample_dem_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># output file name</span></span>
<span><span class="va">output</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"output.tif"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># run breach_depressions tool</span></span>
<span><span class="fu"><a href="../reference/wbt_run_tool.html">wbt_run_tool</a></span><span class="op">(</span>tool_name <span class="op">=</span> <span class="st">"BreachDepressions"</span>, args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"--dem="</span>, <span class="va">input</span>, <span class="st">" --output="</span>, <span class="va">output</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The above method of creating
<code>wbt_breach_depressions(dem = ..., output = ...)</code> to handle
<code>wbt_run_tool("BreachDepressions", args = ...)</code> makes it easy
to generate static methods that have parity with the latest
WhiteboxTools interface.</p>
<div class="section level3">
<h3 id="example-compare-input-v-s--output-with-terra">Example: Compare input v.s. output with <code>terra</code><a class="anchor" aria-label="anchor" href="#example-compare-input-v-s--output-with-terra"></a>
</h3>
<p>We use the {terra} package to read the GeoTIFF file output by
WhiteboxTools.</p>
<div class="section level4">
<h4 id="setup-1">Setup<a class="anchor" aria-label="anchor" href="#setup-1"></a>
</h4>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># sample DEM file path in package extdata folder</span></span>
<span><span class="va">input</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sample_dem_data.html">sample_dem_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># output file name</span></span>
<span><span class="va">output</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"output.tif"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="run-wbt_breach_depressions-breachdepressions-tool">Run <code>wbt_breach_depressions()</code> (BreachDepressions
tool)<a class="anchor" aria-label="anchor" href="#run-wbt_breach_depressions-breachdepressions-tool"></a>
</h4>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># run breach_depressions tool</span></span>
<span><span class="fu"><a href="../reference/wbt_breach_depressions.html">wbt_breach_depressions</a></span><span class="op">(</span>dem <span class="op">=</span> <span class="va">input</span>, output <span class="op">=</span> <span class="va">output</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="visualize-results-with-terra">Visualize results with <code>terra</code><a class="anchor" aria-label="anchor" href="#visualize-results-with-terra"></a>
</h4>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create raster object from input file</span></span>
<span><span class="va">input</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">input</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">output</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># create raster object from output file</span></span>
<span>  <span class="va">output</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">output</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># par(mar = c(2, 1, 2, 1))</span></span>
<span>  <span class="co"># inspect input v.s. output</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">input</span>, axes <span class="op">=</span> <span class="cn">FALSE</span>, main <span class="op">=</span> <span class="st">"DEM"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">output</span>, axes <span class="op">=</span> <span class="cn">FALSE</span>, main <span class="op">=</span> <span class="st">"DEM (Breached Depressions)"</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># inspect numeric difference (output - input) </span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">output</span> <span class="op">-</span> <span class="va">input</span>, axes <span class="op">=</span> <span class="cn">FALSE</span>,  main <span class="op">=</span> <span class="st">"Difference ([Breached Depressions] - [DEM])"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="example-identifying-tributaries">Example: Identifying Tributaries<a class="anchor" aria-label="anchor" href="#example-identifying-tributaries"></a>
</h3>
<p>Here we will take our processing of DEMs a bit further by performing
several WhiteboxTools operations in sequence.</p>
<p>We are interested in identifying and ranking tributaries of
watercourses (streams and rivers).</p>
<p>An R package that makes use of the <code>whitebox</code> R package is
<a href="https://github.com/bkielstr/hydroweight" class="external-link">hydroweight</a>. Here
is a brief example on the beginning of the <code>hydroweight</code>
README showing how the breached DEM above can be used in a spatial
analysis of stream networks.</p>
<div class="section level4">
<h4 id="setup-2">Setup<a class="anchor" aria-label="anchor" href="#setup-2"></a>
</h4>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/giswqs/whiteboxR" class="external-link">whitebox</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Sample DEM from whitebox package</span></span>
<span><span class="va">toy_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sample_dem_data.html">sample_dem_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">toy_dem</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">toy_file</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Generate wd as a temporary directory. </span></span>
<span><span class="co">## Replace with your own path, or "." for current directory</span></span>
<span><span class="va">wd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Write toy_dem to working directory</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/writeRaster.html" class="external-link">writeRaster</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">toy_dem</span>, filename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">wd</span>, <span class="st">"toy_dem.tif"</span><span class="op">)</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="wbt_breach_depressions-breach-dem-depressions">
<code>wbt_breach_depressions()</code> – Breach DEM Depressions<a class="anchor" aria-label="anchor" href="#wbt_breach_depressions-breach-dem-depressions"></a>
</h4>
<p>First we pre-process by breaching depressions in the DEM</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Breach depressions to ensure continuous flow</span></span>
<span><span class="fu"><a href="../reference/wbt_breach_depressions.html">wbt_breach_depressions</a></span><span class="op">(</span></span>
<span>  dem <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">wd</span>, <span class="st">"toy_dem.tif"</span><span class="op">)</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">wd</span>, <span class="st">"toy_dem_breached.tif"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="wbt_d8_pointer-calculate-flow-direction">
<code>wbt_d8_pointer()</code> – Calculate Flow Direction<a class="anchor" aria-label="anchor" href="#wbt_d8_pointer-calculate-flow-direction"></a>
</h4>
<p>Then we generate the direction of flow on the DEM surface using the
“D8” flow pointer method</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Generate d8 flow pointer (note: other flow directions are available)</span></span>
<span><span class="fu"><a href="../reference/wbt_d8_pointer.html">wbt_d8_pointer</a></span><span class="op">(</span></span>
<span>  dem <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">wd</span>, <span class="st">"toy_dem_breached.tif"</span><span class="op">)</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">wd</span>, <span class="st">"toy_dem_breached_d8.tif"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="wbt_d8_flow_accumulation-flow-accumulation">
<code>wbt_d8_flow_accumulation()</code> – Flow Accumulation<a class="anchor" aria-label="anchor" href="#wbt_d8_flow_accumulation-flow-accumulation"></a>
</h4>
<p>Once we calculate the direction of flow by some method, we calculate
cumulative flow</p>
<p>For example with <code><a href="../reference/wbt_d8_flow_accumulation.html">wbt_d8_flow_accumulation()</a></code>:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Generate d8 flow accumulation in units of cells (note: other flow directions are available)</span></span>
<span><span class="fu"><a href="../reference/wbt_d8_flow_accumulation.html">wbt_d8_flow_accumulation</a></span><span class="op">(</span></span>
<span>  input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">wd</span>, <span class="st">"toy_dem_breached.tif"</span><span class="op">)</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">wd</span>, <span class="st">"toy_dem_breached_accum.tif"</span><span class="op">)</span>,</span>
<span>  out_type <span class="op">=</span> <span class="st">"cells"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="section level5">
<h5 id="additional-flow-direction-and-accumulation-tools">Additional Flow Direction and Accumulation Tools<a class="anchor" aria-label="anchor" href="#additional-flow-direction-and-accumulation-tools"></a>
</h5>
<p>In addition to D8 flow pointers (flow direction), there are several
other options for both direction and accumulation such as FD8,
D-infinity, and D-infinity.</p>
<ul>
<li><p>Keyword “Pointer” tools: <code>"D8Pointer"</code>,
<code>"DInfPointer"</code>, <code>"FD8Pointer"</code>,
<code>"Rho8Pointer"</code></p></li>
<li><p>Keyword “FlowAccumulation” tools:
<code>"D8FlowAccumulation"</code>, <code>"DInfFlowAccumulation"</code>,
<code>"FD8FlowAccumulation"</code>, <code>"Rho8FlowAccumulation"</code>,
<code>"MDInfFlowAccumulation"</code></p></li>
</ul>
<p>Search for more tools involving <code>"flow pointer"</code> by key
word: <code>wbt_list_tools(keyword = "flow pointer")</code></p>
<p>This is just an example of the wealth of tool options made available
by the WhiteboxTools platform.</p>
</div>
</div>
<div class="section level4">
<h4 id="wbt_extract_streams-extract-stream-network">
<code>wbt_extract_streams()</code> – Extract Stream Network<a class="anchor" aria-label="anchor" href="#wbt_extract_streams-extract-stream-network"></a>
</h4>
<p>With our flow accumulation raster in hand, we can extract a stream
network with <code><a href="../reference/wbt_extract_streams.html">wbt_extract_streams()</a></code> based on a threshold
(e.g. <code>100</code>) of accumulated flow. This threshold value you
choose will depend on analysis goals, the choice of flow accumulation
algorithm used, local topography, as well as resolution and extent of
DEM.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Generate streams with a stream initiation threshold of 100 cells</span></span>
<span><span class="fu"><a href="../reference/wbt_extract_streams.html">wbt_extract_streams</a></span><span class="op">(</span></span>
<span>  flow_accum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">wd</span>, <span class="st">"toy_dem_breached_accum.tif"</span><span class="op">)</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">wd</span>, <span class="st">"toy_dem_streams.tif"</span><span class="op">)</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="wbt_tributary_identifier-identify-tributaries">
<code>wbt_tributary_identifier()</code> – Identify Tributaries<a class="anchor" aria-label="anchor" href="#wbt_tributary_identifier-identify-tributaries"></a>
</h4>
<p>Next, let’s identify tributaries. This function
<code><a href="../reference/wbt_tributary_identifier.html">wbt_tributary_identifier()</a></code> is a little more complicated
because it takes takes two inputs:</p>
<ul>
<li><p>Our raster D8 pointer file.</p></li>
<li><p>And our raster streams file.</p></li>
</ul>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wbt_tributary_identifier.html">wbt_tributary_identifier</a></span><span class="op">(</span></span>
<span>  d8_pntr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">wd</span>, <span class="st">"toy_dem_breached_d8.tif"</span><span class="op">)</span>,</span>
<span>  streams <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">wd</span>, <span class="st">"toy_dem_streams.tif"</span><span class="op">)</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">wd</span>, <span class="st">"toy_dem_tributaries.tif"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="compare-results">Compare results<a class="anchor" aria-label="anchor" href="#compare-results"></a>
</h4>
<p>Finally, we compare results of <code><a href="../reference/wbt_extract_streams.html">wbt_extract_streams()</a></code>
with <code><a href="../reference/wbt_tributary_identifier.html">wbt_tributary_identifier()</a></code></p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">wd</span>, <span class="st">"toy_dem_streams.tif"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span>, mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">wd</span>, <span class="st">"toy_dem_streams.tif"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    main <span class="op">=</span> <span class="st">"Streams"</span>,</span>
<span>    col <span class="op">=</span> <span class="st">"black"</span></span>
<span>  <span class="op">)</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">wd</span>, <span class="st">"toy_dem_tributaries.tif"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    main <span class="op">=</span> <span class="st">"TributaryIdentifier"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="appendix-wbt_-utility-functions">Appendix: <code>wbt_*</code> utility functions<a class="anchor" aria-label="anchor" href="#appendix-wbt_-utility-functions"></a>
</h2>
<p>These methods provide access to WhiteboxTools executable parameters
and metadata.</p>
<div class="section level3">
<h3 id="wbt_help">
<code>wbt_help()</code><a class="anchor" aria-label="anchor" href="#wbt_help"></a>
</h3>
<p><code><a href="../reference/wbt_help.html">wbt_help()</a></code> prints the WhiteboxTools help: a listing of
available commands for executable</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wbt_help.html">wbt_help</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="wbt_license">
<code>wbt_license()</code><a class="anchor" aria-label="anchor" href="#wbt_license"></a>
</h3>
<p><code><a href="../reference/wbt_license.html">wbt_license()</a></code> prints the WhiteboxTools license</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wbt_license.html">wbt_license</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="wbt_version">
<code>wbt_version()</code><a class="anchor" aria-label="anchor" href="#wbt_version"></a>
</h3>
<p>Prints the WhiteboxTools version</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wbt_version.html">wbt_version</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="wbt_list_tools">
<code>wbt_list_tools()</code><a class="anchor" aria-label="anchor" href="#wbt_list_tools"></a>
</h3>
<p>Use <code><a href="../reference/wbt_list_tools.html">wbt_list_tools()</a></code> to list all available tools in
WhiteboxTools. In version 2.3.0 there are over 0 tools! See all the
available <a href="https://www.whiteboxgeo.com/manual/wbt_book/available_tools/index.html" class="external-link">toolboxes</a>
and <a href="https://www.whiteboxgeo.com/whitebox-geospatial-extensions/" class="external-link">extensions</a>.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wbt_list_tools.html">wbt_list_tools</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The full list can be an overwhelming amount of output, so you pass
the <code>keywords</code> argument to search and filter.</p>
<p>For example we list tools with keyword ‘flowaccumulation’ in tool
name or description.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wbt_list_tools.html">wbt_list_tools</a></span><span class="op">(</span>keywords <span class="op">=</span> <span class="st">"flowaccumulation"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="wbt_tool_help">
<code>wbt_tool_help()</code><a class="anchor" aria-label="anchor" href="#wbt_tool_help"></a>
</h3>
<p>Once we find a tool that we are interested in using, we can
investigate what sort of parameters it takes. The R methods generally
take the same named parameters.</p>
<p>R functions have the naming scheme <code>wbt_tool_name</code> where
<code>_</code> is used for spaces, whereas the tools themselves have no
spaces.</p>
<p><code>wbt_tool_help("tributaryidentifier")</code> shows the command
line help for a tool by name.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wbt_tool_help.html">wbt_tool_help</a></span><span class="op">(</span><span class="st">"tributaryidentifier"</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="../reference/wbt_tributary_identifier.html">?wbt_tributary_identifier</a></code> shows the corresponding R
function help, which is derived from the command line help page and
other metadata.</p>
</div>
<div class="section level3">
<h3 id="wbt_toolbox">
<code>wbt_toolbox()</code><a class="anchor" aria-label="anchor" href="#wbt_toolbox"></a>
</h3>
<p>Another way that tools are organized in WhiteboxTools is by
“toolbox.”</p>
<p><code><a href="../reference/wbt_toolbox.html">wbt_toolbox()</a></code> prints the toolbox for a specific tool (or
all tools if none specified)</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wbt_toolbox.html">wbt_toolbox</a></span><span class="op">(</span>tool_name <span class="op">=</span> <span class="st">"aspect"</span><span class="op">)</span></span></code></pre></div>
<p>Print the full list by not specifying <code>tool_name</code></p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wbt_toolbox.html">wbt_toolbox</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="wbt_tool_parameters">
<code>wbt_tool_parameters()</code><a class="anchor" aria-label="anchor" href="#wbt_tool_parameters"></a>
</h3>
<p><code><a href="../reference/wbt_tool_parameters.html">wbt_tool_parameters()</a></code> retrieves the tool parameter
descriptions for a specific tool as JSON formatted string.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wbt_tool_parameters.html">wbt_tool_parameters</a></span><span class="op">(</span><span class="st">"slope"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="wbt_view_code">
<code>wbt_view_code()</code><a class="anchor" aria-label="anchor" href="#wbt_view_code"></a>
</h3>
<p>WhiteboxTools is written in Rust and is open source. You can view the
source code for a specific tool on the source code repository.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wbt_view_code.html">wbt_view_code</a></span><span class="op">(</span><span class="st">"breach_depressions"</span><span class="op">)</span></span></code></pre></div>
<p>Use the argument <code>viewer=TRUE</code> to use
<code><a href="https://rdrr.io/r/utils/browseURL.html" class="external-link">browseURL()</a></code> to open a browser window to the corresponding
GitHub page.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Qiusheng Wu, Andrew Brown.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
