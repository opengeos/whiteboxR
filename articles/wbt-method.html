<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>`wbt()` method: call 'Whitebox' tools by name • whitebox</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="`wbt()` method: call 'Whitebox' tools by name">
<meta property="og:description" content="whitebox">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">whitebox</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.3.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/datasets.html">whitebox Tool Metadata</a>
    </li>
    <li>
      <a href="../articles/demo.html">whitebox Demo</a>
    </li>
    <li>
      <a href="../articles/wbt-method.html">`wbt()` method: call 'Whitebox' tools by name</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/opengeos/whiteboxR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>
<code>wbt()</code> method: call ‘Whitebox’ tools
by name</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/opengeos/whiteboxR/blob/HEAD/vignettes/wbt-method.Rmd" class="external-link"><code>vignettes/wbt-method.Rmd</code></a></small>
      <div class="hidden name"><code>wbt-method.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="wbt">
<code>wbt()</code><a class="anchor" aria-label="anchor" href="#wbt"></a>
</h2>
<p>The <code><a href="../reference/wbt.html">wbt()</a></code> method is a high-level wrapper function to
manage flow of information between R and WhiteboxTools. With
<code><a href="../reference/wbt.html">wbt()</a></code> one can run sequential analyses in Whitebox while
having R prepare inputs, generate commands, and visualize results.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/opengeos/whiteboxR" class="external-link">whitebox</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h3>
<p>Know what tool you want to run but <em>can’t remember the required
parameters</em>? Just type <code>wbt("toolname")</code></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wbt.html">wbt</a></span><span class="op">(</span><span class="st">"slope"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Required arguments:</span></span>
<span><span class="co">#&gt; - [ ] dem -- Input raster DEM file.</span></span>
<span><span class="co">#&gt; - [ ] output -- Output raster file.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Optional arguments:</span></span>
<span><span class="co">#&gt; - [ ] zfactor -- Optional multiplier for when the vertical and horizontal units are not the same.</span></span>
<span><span class="co">#&gt; - [ ] units -- Units of output raster; options include 'degrees', 'radians', 'percent'</span></span>
<span><span class="co">#&gt; &lt;wbt_result&gt;</span></span>
<span><span class="co">#&gt; No parameters (Slope)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Slope ERROR: 'dem', 'output' required</span></span></code></pre></div>
<p>Output produced on error and with invalid arguments helps guide use
interactively by prompting with required and optional arguments as a
checklist.</p>
</div>
<div class="section level3">
<h3 id="result-objects">Result Objects<a class="anchor" aria-label="anchor" href="#result-objects"></a>
</h3>
<p>All calls to <code><a href="../reference/wbt.html">wbt()</a></code> return an S3 object with class
<code>wbt_result</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get file path of sample DEM</span></span>
<span><span class="va">dem</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sample_dem_data.html">sample_dem_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/wbt.html">wbt</a></span><span class="op">(</span><span class="st">"slope"</span>, dem <span class="op">=</span> <span class="va">dem</span>, output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"slope.tif"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;wbt_result&gt;</span></span>
<span><span class="co">#&gt; --- PARAMETERS (Slope) ---</span></span>
<span><span class="co">#&gt; dem  : '/home/runner/work/_temp/Library/whitebox/extdata/DEM.tif'</span></span>
<span><span class="co">#&gt; output   : '/tmp/RtmpCIoXDm/slope.tif' </span></span>
<span><span class="co">#&gt; --- RESULT ---</span></span>
<span><span class="co">#&gt; $output</span></span>
<span><span class="co">#&gt;   File result:  //tmp/RtmpCIoXDm/slope.tif exists (Last modified: 2023-09-19 16:44:41.928378)</span></span></code></pre></div>
<p>Whether a system call succeeds or fails the parameters that were
passed to the WhiteboxTools executable and references to any output file
paths that were specified are returned. If output files reference
spatial data (e.g. a GeoTIFF file) they may be converted to a file-based
R object providing information about the result.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wbt.html">wbt</a></span><span class="op">(</span><span class="st">"slope"</span>, goof <span class="op">=</span> <span class="va">dem</span>, output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"slope.tif"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error: invalid parameter 'goof'</span></span>
<span><span class="co">#&gt; Required arguments:</span></span>
<span><span class="co">#&gt; - [ ] dem -- Input raster DEM file.</span></span>
<span><span class="co">#&gt; - [*] output -- Output raster file.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Optional arguments:</span></span>
<span><span class="co">#&gt; - [ ] zfactor -- Optional multiplier for when the vertical and horizontal units are not the same.</span></span>
<span><span class="co">#&gt; - [ ] units -- Units of output raster; options include 'degrees', 'radians', 'percent'</span></span>
<span><span class="co">#&gt; &lt;wbt_result&gt;</span></span>
<span><span class="co">#&gt; --- PARAMETERS (Slope) ---</span></span>
<span><span class="co">#&gt; goof : '/home/runner/work/_temp/Library/whitebox/extdata/DEM.tif'</span></span>
<span><span class="co">#&gt; output   : '/tmp/RtmpCIoXDm/slope.tif' </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Slope ERROR: 'goof' invalid; 'dem' required</span></span></code></pre></div>
<p>When a call fails an informative error message issued, and the error
will be cached inside the result. Prior runs references are stored as
well for sequential tool runs; more on that below.</p>
<div class="section level4">
<h4 id="wbt_result-class">
<code>wbt_result</code> class<a class="anchor" aria-label="anchor" href="#wbt_result-class"></a>
</h4>
<p>A <code>wbt_result</code> class object is a base R
<code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> with standard element names (<code>"tool"</code>,
<code>"args"</code>, <code>"stdout"</code>, <code>"crs"</code>,
<code>"result"</code>, <code>"history"</code>) and the
<code>"class"</code> attribute <code>"wbt_result"</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="../reference/wbt.html">wbt</a></span><span class="op">(</span><span class="st">"slope"</span>, dem <span class="op">=</span> <span class="va">dem</span>, output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"slope.tif"</span><span class="op">)</span><span class="op">)</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 6</span></span>
<span><span class="co">#&gt;  $ tool   : chr "Slope"</span></span>
<span><span class="co">#&gt;  $ args   : chr "--dem=/home/runner/work/_temp/Library/whitebox/extdata/DEM.tif --output=/tmp/RtmpCIoXDm/slope.tif"</span></span>
<span><span class="co">#&gt;  $ stdout : chr "Slope - Elapsed Time (excluding I/O): 0.12s"</span></span>
<span><span class="co">#&gt;  $ crs    : chr ""</span></span>
<span><span class="co">#&gt;   ..- attr(*, "package")= Named chr ""</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "names")= chr "dem"</span></span>
<span><span class="co">#&gt;  $ result :List of 1</span></span>
<span><span class="co">#&gt;  $ history:List of 1</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr "wbt_result"</span></span></code></pre></div>
<p>Any <code>output</code> produced by the tool (usually file paths set
by the user) will be included in the <code>wbt_result$result</code>
list.</p>
</div>
<div class="section level4">
<h4 id="wbt_result-on-error">
<code>wbt_result</code> on error<a class="anchor" aria-label="anchor" href="#wbt_result-on-error"></a>
</h4>
<p>If there is an error a <code>try-error</code> class object with an
error message is returned in lieu of a list in <code>$result</code></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># on error there is a try-error object in $result</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/wbt.html">wbt</a></span><span class="op">(</span><span class="st">"slope"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Required arguments:</span></span>
<span><span class="co">#&gt; - [ ] dem -- Input raster DEM file.</span></span>
<span><span class="co">#&gt; - [ ] output -- Output raster file.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Optional arguments:</span></span>
<span><span class="co">#&gt; - [ ] zfactor -- Optional multiplier for when the vertical and horizontal units are not the same.</span></span>
<span><span class="co">#&gt; - [ ] units -- Units of output raster; options include 'degrees', 'radians', 'percent'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">inherits</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">result</span>, <span class="st">'try-error'</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">result</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; ERROR: 'dem', 'output' required</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="vignette-topics">Vignette Topics<a class="anchor" aria-label="anchor" href="#vignette-topics"></a>
</h3>
<p>We now will cover how the <code><a href="../reference/wbt.html">wbt()</a></code> method and
<code>wbt_result</code> class can be used for the following:</p>
<ul>
<li><p>Input and Output with R spatial objects</p></li>
<li><p>Running Sequences of Tools (optionally: with pipe
<code>|&gt;</code> or <code>%&gt;%</code>)</p></li>
<li><p>Handling Coordinate Reference Systems</p></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="input-and-output-with-r-spatial-objects">Input and Output with R spatial objects<a class="anchor" aria-label="anchor" href="#input-and-output-with-r-spatial-objects"></a>
</h2>
<p>A feature of <code><a href="../reference/wbt.html">wbt()</a></code> is that it handles input/output and
file name management if you are using R objects as input. It can be an
onerous task to manage files for workflows involving many tool runs.</p>
<p>If you use a <code>terra</code> object as input, you will get a
<code>SpatRaster</code>. If you use a <code>raster</code> object as your
input object frontend, you will get a <code>RasterLayer</code> object as
output for tools that produce a raster. There will be file paths
associated with that R object.</p>
<div class="section level4">
<h4 id="compare-raster-and-terra-as-r-raster-object-frontends">Compare <code>raster</code> and <code>terra</code> as R raster
object frontends<a class="anchor" aria-label="anchor" href="#compare-raster-and-terra-as-r-raster-object-frontends"></a>
</h4>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"raster"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">rdem</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html" class="external-link">raster</a></span><span class="op">(</span><span class="va">dem</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># raster input; raster output</span></span>
<span>  <span class="va">r1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/wbt.html">wbt</a></span><span class="op">(</span><span class="st">"slope"</span>, dem <span class="op">=</span> <span class="va">rdem</span>, output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"slope.tif"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">r1</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">r1</span><span class="op">$</span><span class="va">result</span><span class="op">$</span><span class="va">output</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; Loading required namespace: raster</span></span>
<span><span class="co">#&gt; The legacy packages maptools, rgdal, and rgeos, underpinning the sp package,</span></span>
<span><span class="co">#&gt; which was just loaded, will retire in October 2023.</span></span>
<span><span class="co">#&gt; Please refer to R-spatial evolution reports for details, especially</span></span>
<span><span class="co">#&gt; https://r-spatial.org/r/2023/05/15/evolution4.html.</span></span>
<span><span class="co">#&gt; It may be desirable to make the sf package available;</span></span>
<span><span class="co">#&gt; package maintainers should consider adding sf to Suggests:.</span></span>
<span><span class="co">#&gt; The sp package is now running under evolution status 2</span></span>
<span><span class="co">#&gt;      (status 2 uses the sf package in place of rgdal)</span></span>
<span><span class="co">#&gt; [1] "RasterLayer"</span></span>
<span><span class="co">#&gt; attr(,"package")</span></span>
<span><span class="co">#&gt; [1] "raster"</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tdem</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">dem</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## terra input; terra output</span></span>
<span><span class="va">t1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/wbt.html">wbt</a></span><span class="op">(</span><span class="st">"slope"</span>, dem <span class="op">=</span> <span class="va">tdem</span>, output <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"slope.tif"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">t1</span></span>
<span><span class="co">#&gt; &lt;wbt_result&gt;</span></span>
<span><span class="co">#&gt; --- PARAMETERS (Slope) ---</span></span>
<span><span class="co">#&gt; dem  : '/home/runner/work/whiteboxR/whiteboxR/vignettes/file4124289f424f.tif'</span></span>
<span><span class="co">#&gt; output   : '/tmp/RtmpCIoXDm/slope.tif' </span></span>
<span><span class="co">#&gt; --- RESULT ---</span></span>
<span><span class="co">#&gt; $output</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 188, 237, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 90, 90  (x, y)</span></span>
<span><span class="co">#&gt; extent      : 664692, 686022, 4878904, 4895824  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. : NAD83 / UTM zone 18N (EPSG:26918) </span></span>
<span><span class="co">#&gt; source      : slope.tif </span></span>
<span><span class="co">#&gt; name        : slope</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">t1</span><span class="op">$</span><span class="va">result</span><span class="op">$</span><span class="va">output</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "SpatRaster"</span></span>
<span><span class="co">#&gt; attr(,"package")</span></span>
<span><span class="co">#&gt; [1] "terra"</span></span></code></pre></div>
<p>The user still needs to specify paths but <code><a href="../reference/wbt.html">wbt()</a></code> eases
the process of converting input objects to paths and reading output
paths to R objects after the tool has run. In principle any R object
that references a file with type that Whitebox supports can be handled
under the current (simple; proof of concept) system. Using file-based
representations may not be the most efficient, but allows for a tangible
trail of the steps in a workflow to be followed that otherwise might be
hard to track.</p>
</div>
</div>
<div class="section level2">
<h2 id="wbt_source-rasters-in-memory-and-vector-data">
<code>wbt_source()</code>: rasters in memory, and vector data<a class="anchor" aria-label="anchor" href="#wbt_source-rasters-in-memory-and-vector-data"></a>
</h2>
<p>The terra and raster packages use pointers to a file/raster
connection except when a grid is entirely in memory. Processing these
types of rasters with whitebox requires writing out as a temporary
GeoTIFF file for tool input. In general <code><a href="../reference/wbt.html">wbt()</a></code> can handle
this for you.</p>
<p>Vector data (point, line and polygon geometries) are commonly stored
stored in sf data.frames, sp objects, or terra SpatVector objects. These
types are read into memory on creation.</p>
<p>Reading vector data into R memory is not needed to run Whitebox
tools, so <code><a href="../reference/wbt_source.html">wbt_source()</a></code> provides a means to annotate objects
with information about source file path (similar to how terra/raster
handle raster sources) such that they can be processed further by
<code><a href="../reference/wbt.html">wbt()</a></code> with minimal overhead. Objects like the terra
SpatVectorProxy use delayed read by default. Passing a file path to
<code><a href="../reference/wbt_source.html">wbt_source()</a></code> will create a SpatVectorProxy with necessary
information for use with <code><a href="../reference/wbt.html">wbt()</a></code>.</p>
<p>For instance, we can create a reference for a sample ESRI Shapefile
via <code><a href="../reference/wbt_source.html">wbt_source()</a></code>. The result is a SpatVectorProxy.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; terra 1.7.49</span></span>
<span><span class="va">shp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"ex/lux.shp"</span>, package <span class="op">=</span> <span class="st">"terra"</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/wbt_source.html">wbt_source</a></span><span class="op">(</span><span class="va">shp</span><span class="op">)</span></span>
<span><span class="va">x</span></span>
<span><span class="co">#&gt;  class       : SpatVectorProxy</span></span>
<span><span class="co">#&gt;  geometry    : polygons </span></span>
<span><span class="co">#&gt;  dimensions  : 12, 6  (geometries, attributes)</span></span>
<span><span class="co">#&gt;  extent      : 5.826232, 6.16085, 49.94611, 50.18162  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt;  source      : lux.shp</span></span>
<span><span class="co">#&gt;  layer       : lux </span></span>
<span><span class="co">#&gt;  coord. ref. : lon/lat WGS 84 (EPSG:4326) </span></span>
<span><span class="co">#&gt;  names       :  ID_1 NAME_1  ID_2 NAME_2  AREA   POP</span></span>
<span><span class="co">#&gt;  type        : &lt;num&gt;  &lt;chr&gt; &lt;num&gt;  &lt;chr&gt; &lt;num&gt; &lt;int&gt;</span></span></code></pre></div>
<p>The SpatVectorProxy provides a light-weight means to create an R
object reference to a large file; allowing the “heavy” lifting for that
file to be done primarily by WhiteboxTools (or GDAL via {terra}).</p>
<p>At time of writing this document, WhiteboxTools does not support
vector data inputs other than Shapefile. If we have, for example, a
GeoPackage, <code><a href="../reference/wbt_source.html">wbt_source()</a></code> will convert the input to a
temporary shapefile and return a SpatVectorProxy that references that
file. This object can then be used as input to <code><a href="../reference/wbt.html">wbt()</a></code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load the data</span></span>
<span><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/query.html" class="external-link">query</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># remove area column</span></span>
<span><span class="va">x2</span><span class="op">$</span><span class="va">AREA</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span></span>
<span><span class="co"># create a GeoPackage</span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/writeVector.html" class="external-link">writeVector</a></span><span class="op">(</span><span class="va">x2</span>, filename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"lux.gpkg"</span><span class="op">)</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in x@cpp$write(filename, layer, filetype, insert[1], overwrite[1], :</span></span>
<span><span class="co">#&gt; GDAL Message 6: dataset /tmp/RtmpCIoXDm/lux.gpkg does not support layer</span></span>
<span><span class="co">#&gt; creation option ENCODING</span></span>
<span></span>
<span><span class="co"># now the source is a temporary .shp</span></span>
<span><span class="va">x3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/wbt_source.html">wbt_source</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"lux.gpkg"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/wbt.html">wbt</a></span><span class="op">(</span><span class="st">"polygon_area"</span>, input <span class="op">=</span> <span class="va">x3</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;wbt_result&gt;</span></span>
<span><span class="co">#&gt; --- PARAMETERS (PolygonArea) ---</span></span>
<span><span class="co">#&gt; input    : '/tmp/RtmpCIoXDm/lux.gpkg_file41244de34ab0.shp' </span></span>
<span><span class="co">#&gt; --- RESULT ---</span></span>
<span><span class="co">#&gt; $output</span></span>
<span><span class="co">#&gt;  class       : SpatVectorProxy</span></span>
<span><span class="co">#&gt;  geometry    : polygons </span></span>
<span><span class="co">#&gt;  dimensions  : 12, 6  (geometries, attributes)</span></span>
<span><span class="co">#&gt;  extent      : 5.826232, 6.16085, 49.94611, 50.18162  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt;  source      : lux.gpkg_file41244de34ab0.shp</span></span>
<span><span class="co">#&gt;  layer       : lux.gpkg_file41244de34ab0 </span></span>
<span><span class="co">#&gt;  coord. ref. : lon/lat WGS 84 (EPSG:4326) </span></span>
<span><span class="co">#&gt;  names       :  ID_1 NAME_1  ID_2 NAME_2   POP  AREA</span></span>
<span><span class="co">#&gt;  type        : &lt;num&gt;  &lt;chr&gt; &lt;num&gt;  &lt;chr&gt; &lt;int&gt; &lt;num&gt;</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="running-sequences-of-tools">Running Sequences of Tools<a class="anchor" aria-label="anchor" href="#running-sequences-of-tools"></a>
</h2>
<p>When you call <code><a href="../reference/wbt.html">wbt()</a></code> and the first argument is a
<code>wbt_result</code> the <code>output</code> from the input
<code>wbt_result</code> is passed as the first <code>input</code> to the
new tool run.</p>
<p>This general “pass the output as the first input” works even if the
first <code>input</code> parameter (<code>"-i"</code> flag) is something
different such as <code>dem</code> or <code>input1</code>.</p>
<p>This makes it possible to chain different operations together in a
sequence.</p>
<p>If all of the required parameters are specified the tool will be
run.</p>
<p>Here we run “Slope” on a DEM, then run “Slope” on it again to get a
second derivative “curvature”.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/wbt.html">wbt</a></span><span class="op">(</span><span class="st">"slope"</span>, dem <span class="op">=</span> <span class="va">dem</span>, output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"slope.tif"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/wbt.html">wbt</a></span><span class="op">(</span><span class="va">x</span>, tool_name <span class="op">=</span> <span class="st">"slope"</span>, output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"curvature.tif"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="using-pipes">Using pipes<a class="anchor" aria-label="anchor" href="#using-pipes"></a>
</h3>
<p>Nested chained operation syntax can be transformed to use pipe
operators ({base} R 4.1+ <code>|&gt;</code> or {magrittr}
<code>%&gt;%</code>). This can improve the readability of the code
(fewer nested parentheses) and the first argument transfer behavior
allows results from each step to be transferred to the input of the
next.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wbt.html">wbt</a></span><span class="op">(</span><span class="st">"slope"</span>, dem <span class="op">=</span> <span class="va">dem</span>, output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"slope.tif"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/wbt.html">wbt</a></span><span class="op">(</span><span class="st">"slope"</span>, output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"curvature.tif"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The <code>wbt_result</code> output that prints to the console will
reflect the input/output parameters of the most recent tool run in a
tool chain.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x2</span></span>
<span><span class="co">#&gt; &lt;wbt_result&gt;</span></span>
<span><span class="co">#&gt; --- PARAMETERS (Slope) ---</span></span>
<span><span class="co">#&gt; dem  : '//tmp/RtmpCIoXDm/slope.tif'</span></span>
<span><span class="co">#&gt; output   : '/tmp/RtmpCIoXDm/curvature.tif' </span></span>
<span><span class="co">#&gt; --- RESULT ---</span></span>
<span><span class="co">#&gt; $output</span></span>
<span><span class="co">#&gt;   File result:  //tmp/RtmpCIoXDm/curvature.tif exists (Last modified: 2023-09-19 16:44:44.884443)</span></span>
<span><span class="co">#&gt; --- HISTORY ---</span></span>
<span><span class="co">#&gt; Prior results (n=1) for: Slope </span></span>
<span><span class="co">#&gt;  - Slope (output&lt;character&gt;)</span></span></code></pre></div>
<p><code><a href="../reference/wbt.html">wbt_result()</a></code> is the method to get <code>$result</code>
for single runs or all <code>$result</code> in <code>$history</code> for
chained runs from a <code>wbt_result</code> object.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="../reference/wbt.html">wbt_result</a></span><span class="op">(</span><span class="va">x2</span><span class="op">)</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt;  chr [1:2] "//tmp/RtmpCIoXDm/slope.tif" "//tmp/RtmpCIoXDm/curvature.tif"</span></span></code></pre></div>
<p>The <code>$history</code> element is a list of the
<code>wbt_result</code> from individual runs.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">x2</span><span class="op">$</span><span class="va">history</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 2</span></span>
<span><span class="co">#&gt;  $ :List of 5</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr "wbt_result"</span></span>
<span><span class="co">#&gt;  $ :List of 5</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr "wbt_result"</span></span></code></pre></div>
<p>If you pass invalid results from one step to the next, you get an
informative error message.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/wbt.html">wbt</a></span><span class="op">(</span><span class="st">"slope"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Required arguments:</span></span>
<span><span class="co">#&gt; - [ ] dem -- Input raster DEM file.</span></span>
<span><span class="co">#&gt; - [ ] output -- Output raster file.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Optional arguments:</span></span>
<span><span class="co">#&gt; - [ ] zfactor -- Optional multiplier for when the vertical and horizontal units are not the same.</span></span>
<span><span class="co">#&gt; - [ ] units -- Units of output raster; options include 'degrees', 'radians', 'percent'</span></span>
<span><span class="fu"><a href="../reference/wbt.html">wbt</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"slope"</span>, output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"foo.tif"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; NOTE: try-error result cannot be used as `dem`</span></span>
<span><span class="co">#&gt; Required arguments:</span></span>
<span><span class="co">#&gt; - [ ] dem -- Input raster DEM file.</span></span>
<span><span class="co">#&gt; - [*] output -- Output raster file.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Optional arguments:</span></span>
<span><span class="co">#&gt; - [ ] zfactor -- Optional multiplier for when the vertical and horizontal units are not the same.</span></span>
<span><span class="co">#&gt; - [ ] units -- Units of output raster; options include 'degrees', 'radians', 'percent'</span></span>
<span><span class="co">#&gt; &lt;wbt_result&gt;</span></span>
<span><span class="co">#&gt; --- PARAMETERS (Slope) ---</span></span>
<span><span class="co">#&gt; output   : '/tmp/RtmpCIoXDm/foo.tif' </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Slope ERROR: 'dem' required </span></span>
<span><span class="co">#&gt; --- HISTORY ---</span></span>
<span><span class="co">#&gt; Prior results (n=1) for: Slope </span></span>
<span><span class="co">#&gt;  - Slope (&lt;character&gt;)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="coordinate-reference-systems-crs">Coordinate Reference Systems (CRS)<a class="anchor" aria-label="anchor" href="#coordinate-reference-systems-crs"></a>
</h2>
<p>On top of handling file paths it is necessary for Geographic
Information Systems to handle Coordinate Reference System (CRS)
information. Many R tools in the GDAL/PROJ sphere require valid CRS to
operate.</p>
<p>WhiteboxTools will read the GeoKey information from your
<em>GeoTIFF</em> files specified by path and propagate that to the
output file result. When you read those files with R, you should find
that the original file’s CRS has been transferred.</p>
<p><code><a href="../reference/wbt.html">wbt()</a></code> and <code>wbt_result</code> help ensure consistent
file and CRS information across sequences of operations and within
calls–especially those <em>involving R spatial objects</em>.</p>
<p>If you specified the CRS in R, or made the raster entirely in R, you
might need a hand setting up the file-based representation that
WhiteboxTools will use. This is easy enough to do with
<code><a href="https://rdrr.io/pkg/terra/man/crs.html" class="external-link">crs()</a></code>, <code><a href="https://rdrr.io/pkg/terra/man/writeRaster.html" class="external-link">writeRaster()</a></code> and the equivalent but
often requires more boilerplate code than just specifying the argument,
or having CRS propagate from input.</p>
<p>For inputs that have a file-based representation
(e.g. <code>RasterLayer</code> and <code>SpatRaster</code> objects)
<code><a href="../reference/wbt.html">wbt()</a></code> provides an interface where R objects can be
substituted for file names and vice versa. User and workflow level
attributes like CRS and working directory be handled at the same
time.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dem</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sample_dem_data.html">sample_dem_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## equivalent to:</span></span>
<span><span class="co"># dem &lt;- system.file("extdata/DEM.tif", package = "whitebox")</span></span></code></pre></div>
<p>In the process of reading/writing files that may contain CRS
information, such as this sample DEM, the CRS can be inspected, modified
and propagated to file or R objects.</p>
<div class="section level3">
<h3 id="setting-the-crs">Setting the CRS<a class="anchor" aria-label="anchor" href="#setting-the-crs"></a>
</h3>
<p>If the CRS is specified in the input <code>SpatRaster</code> object,
<code><a href="../reference/wbt.html">wbt()</a></code> makes sure it is propagated to the R object result.
<code><a href="../reference/wbt.html">wbt()</a></code> does not alter or copy the source or output files
which may or may not have CRS information.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">araster</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">dem</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/wbt.html">wbt</a></span><span class="op">(</span><span class="st">"slope"</span>, dem <span class="op">=</span> <span class="va">araster</span>, output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"foo.tif"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;wbt_result&gt;</span></span>
<span><span class="co">#&gt; --- PARAMETERS (Slope) ---</span></span>
<span><span class="co">#&gt; dem  : '/home/runner/work/whiteboxR/whiteboxR/vignettes/file412437c0d77a.tif'</span></span>
<span><span class="co">#&gt; output   : '/tmp/RtmpCIoXDm/foo.tif' </span></span>
<span><span class="co">#&gt; --- RESULT ---</span></span>
<span><span class="co">#&gt; $output</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 188, 237, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 90, 90  (x, y)</span></span>
<span><span class="co">#&gt; extent      : 664692, 686022, 4878904, 4895824  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. : NAD83 / UTM zone 18N (EPSG:26918) </span></span>
<span><span class="co">#&gt; source      : foo.tif </span></span>
<span><span class="co">#&gt; name        : foo</span></span></code></pre></div>
<p>Alternately you can specify the <code>crs</code> argument to
<code><a href="../reference/wbt.html">wbt()</a></code> instead of <code><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast()</a></code>. This will directly
set the <code>crs</code> element of the <code>wbt_result</code> of your
output.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wbt.html">wbt</a></span><span class="op">(</span><span class="st">"slope"</span>, dem <span class="op">=</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">dem</span><span class="op">)</span>, crs <span class="op">=</span> <span class="st">"EPSG:26918"</span>, output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"foo.tif"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;wbt_result&gt;</span></span>
<span><span class="co">#&gt; --- PARAMETERS (Slope) ---</span></span>
<span><span class="co">#&gt; dem  : '/home/runner/work/whiteboxR/whiteboxR/vignettes/file412461451e57.tif'</span></span>
<span><span class="co">#&gt; output   : '/tmp/RtmpCIoXDm/foo.tif' </span></span>
<span><span class="co">#&gt; --- RESULT ---</span></span>
<span><span class="co">#&gt; $output</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 188, 237, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 90, 90  (x, y)</span></span>
<span><span class="co">#&gt; extent      : 664692, 686022, 4878904, 4895824  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. : NAD83 / UTM zone 18N (EPSG:26918) </span></span>
<span><span class="co">#&gt; source      : foo.tif </span></span>
<span><span class="co">#&gt; name        : foo</span></span></code></pre></div>
<p>In either case wherever you specify the <code>crs</code> argument the
<code>crs</code> is stored in the <code>wbt_result</code> and propagated
to the relevant output. Again, the source files are unchanged if they
had no CRS or invalid CRS (until you write that updated CRS to
file).</p>
<p>If two input R objects have different (or no) CRS then the
<code><a href="../reference/wbt.html">wbt()</a></code> method will provide a message to the user:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r1</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">dem</span><span class="op">)</span> <span class="co"># default: EPSG:26918</span></span>
<span><span class="va">r2</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/deepcopy.html" class="external-link">deepcopy</a></span><span class="op">(</span><span class="va">r1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/crs.html" class="external-link">crs</a></span><span class="op">(</span><span class="va">r2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"EPSG:26917"</span> <span class="co"># something else/wrong</span></span>
<span><span class="fu"><a href="../reference/wbt.html">wbt</a></span><span class="op">(</span><span class="st">"add"</span>, </span>
<span>    input1 <span class="op">=</span> <span class="va">r1</span>, </span>
<span>    input2 <span class="op">=</span> <span class="va">r2</span>, </span>
<span>    output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"foo.tif"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="co">#&gt; NOTE: Input CRS do not match.</span></span>
<span><span class="co">#&gt; &lt;wbt_result&gt;</span></span>
<span><span class="co">#&gt; --- PARAMETERS (Add) ---</span></span>
<span><span class="co">#&gt; input1   : '/home/runner/work/whiteboxR/whiteboxR/vignettes/file412467612de1.tif'</span></span>
<span><span class="co">#&gt; input2   : '/home/runner/work/whiteboxR/whiteboxR/vignettes/file41246ffaba80.tif'</span></span>
<span><span class="co">#&gt; output   : '/tmp/RtmpCIoXDm/foo.tif' </span></span>
<span><span class="co">#&gt; --- RESULT ---</span></span>
<span><span class="co">#&gt; $output</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 188, 237, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 90, 90  (x, y)</span></span>
<span><span class="co">#&gt; extent      : 664692, 686022, 4878904, 4895824  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. : NAD83 / UTM zone 18N (EPSG:26918) </span></span>
<span><span class="co">#&gt; source      : foo.tif </span></span>
<span><span class="co">#&gt; name        : foo</span></span></code></pre></div>
<p>This message is suppressed and output CRS set accordingly if the
<code>crs</code> argument is specified. This user set CRS is only in the
SpatRaster object, and does not necessarily match that of the file used
as input or returned as output.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wbt.html">wbt</a></span><span class="op">(</span><span class="st">"add"</span>, </span>
<span>    input1 <span class="op">=</span> <span class="va">r1</span>,</span>
<span>    input2 <span class="op">=</span> <span class="va">r2</span>, </span>
<span>    crs <span class="op">=</span> <span class="st">"EPSG:26918"</span>,</span>
<span>    output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"foo.tif"</span><span class="op">)</span></span>
<span>   <span class="op">)</span></span>
<span><span class="co">#&gt; &lt;wbt_result&gt;</span></span>
<span><span class="co">#&gt; --- PARAMETERS (Add) ---</span></span>
<span><span class="co">#&gt; input1   : '/home/runner/work/whiteboxR/whiteboxR/vignettes/file41242e054aac.tif'</span></span>
<span><span class="co">#&gt; input2   : '/home/runner/work/whiteboxR/whiteboxR/vignettes/file41243010e8bc.tif'</span></span>
<span><span class="co">#&gt; output   : '/tmp/RtmpCIoXDm/foo.tif' </span></span>
<span><span class="co">#&gt; --- RESULT ---</span></span>
<span><span class="co">#&gt; $output</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 188, 237, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 90, 90  (x, y)</span></span>
<span><span class="co">#&gt; extent      : 664692, 686022, 4878904, 4895824  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. : NAD83 / UTM zone 18N (EPSG:26918) </span></span>
<span><span class="co">#&gt; source      : foo.tif </span></span>
<span><span class="co">#&gt; name        : foo</span></span></code></pre></div>
<p><!--
# Future Plans

Future additions to this vignette may include:

 - Managing WhiteboxTools working directories

 - Managing WhiteboxTools file types
 
In the future users will be able to:

 - Set a temporary or persistent working
directory and have output file paths/names auto-generated, allowing them to
work entirely with R objects and `wbt_result` while making an intermediate file
record in the background.

 - Use a wrapper class for generic
groups of Whitebox file types; allowing file name references for any R object
or output file type to be stored: optimized/customizable read/write methods used for
specific file types and generic .rda files with metadata for others.

 - Batch of tool runs on e.g. watershed extents --></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Qiusheng Wu, Andrew Brown.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
